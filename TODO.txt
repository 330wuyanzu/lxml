===============
ToDo's for lxml
===============

lxml
====

Exposing libxml2 functionalities
--------------------------------

* Test XML entities, also in an ElementTree context.


In general
----------

* test namespaces more in-depth

* more testing on multi-threading

* better exception messages for XPath and schemas based on error log,
  e.g. missing namespace mappings in XPath

* more testing on input/output of encoded filenames, including custom
  resolvers, relative XSLT imports, ...


QName
-----

* expose prefix support?


Objectify
---------

* emulate setting special __attributes__ on ObjectifiedElement's as Python
  attributes, not XML children


Features
--------

* RelaxNG compact notation (rnc versus rng) support.  Currently not supported
  by libxml2 (patch exists)


XSLT extension elements
-----------------------

* implementation: one base class that represents the result parent

  - .append(), .extend() and .text will add to the result tree (no .tail)

  - difference: Elements should be copied, not moved?  (will break
    later changes, but this just means that Elements in the result
    tree are immutable, including those that were added)

  - how to make input tree read-only? maybe just document?

  - docs: "once in the result tree, Elements must no longer be changed"?


lxml 2.0
========

* always use '<string>' as URL when tree was parsed from string? (can libxml2
  handle this?)

* clean up (and remove?) duplicated API for extension functions

* follow PEP 8 in API naming (avoidCamelCase in_favour_of_underscores)

* clean support for entities (is the Entity element class enough?)

* rewrite iterparse() to accept a parser as argument instead of being
  one (or maybe not: iterparse() can't deal with all parser options
  anyway).
